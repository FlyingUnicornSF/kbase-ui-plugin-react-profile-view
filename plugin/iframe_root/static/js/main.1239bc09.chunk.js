(window["webpackJsonpant-design-profile"]=window["webpackJsonpant-design-profile"]||[]).push([[0],{356:function(e,t,a){e.exports=a.p+"static/media/nouserpic.9af42ba9.png"},363:function(e,t,a){e.exports=a(753)},368:function(e,t,a){},729:function(e,t,a){},753:function(e,t,a){"use strict";a.r(t);var r,n,s,i,o,l=a(0),c=a.n(l),u=a(8),p=a.n(u),h=(a(368),a(369),a(243)),f=a(44),d=a(87),b=a(125),m=a(335),E=a(65);function v(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function g(e,t){var a=t.payload;switch(t.type){case s.FETCH_NARRATIVE_SUCCESS:case s.FETCH_NARRATIVE_ERROR:return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?v(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):v(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{narrativeState:a});default:return e}}function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}!function(e){e.FETCH_PROFILE="FETCH_PROFILE",e.FETCH_PROFILE_NONE="FETCH_PROFILE_NONE",e.FETCH_PROFILE_SUCCESS="FETCH_PROFILE_SUCCESS",e.FETCH_PROFILE_ERROR="FETCH_PROFILE_ERROR"}(r||(r={})),function(e){e.FETCH_ORGS="FETCH_ORGS",e.FETCH_ORGS_NONE="INITIAL_RENDER_ORGS",e.FETCH_ORGS_SUCCESS="FETCH_ORGS_SUCCESS",e.FETCH_ORGS_ERROR="FETCH_ORGS_ERROR"}(n||(n={})),function(e){e.FETCH_NARRATIVE="FETCH_NARRATIVE",e.FETCH_NARRATIVE_NONE="INITIAL_RENDER_NARRATIVE",e.FETCH_NARRATIVE_SUCCESS="FETCH_NARRATIVE_SUCCESS",e.FETCH_NARRATIVE_ERROR="FETCH_NARRATIVE_ERROR"}(s||(s={})),function(e){e.NONE="none",e.FETCHING="fetching",e.SUCCESS="success",e.ERROR="error"}(i||(i={})),function(e){e.NONE="none",e.FETCHING="fetching",e.SUCCESS="success",e.ERROR="error"}(o||(o={}));var y=function(e,t){return Object(E.baseReducer)(e,t)};function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var k=function(e,t){var a=y(e,t);if(!e)return e;if(a)return a;switch(t.type){case s.FETCH_NARRATIVE:case s.FETCH_NARRATIVE_NONE:case s.FETCH_NARRATIVE_SUCCESS:case s.FETCH_NARRATIVE_ERROR:return g(e,t);case r.FETCH_PROFILE:case r.FETCH_PROFILE_NONE:case r.FETCH_PROFILE_SUCCESS:case r.FETCH_PROFILE_ERROR:return function(e,t){var a=t.payload;switch(t.type){case r.FETCH_PROFILE_SUCCESS:return S({},e,{profileView:a});case r.FETCH_PROFILE_ERROR:return S({},e,{profileView:{profileFetchStatus:i.ERROR}});case r.FETCH_PROFILE:return S({},e,{profileView:{profileFetchStatus:i.FETCHING}});case r.FETCH_PROFILE_NONE:return S({},e,{profileView:{profileFetchStatus:i.NONE}});default:return e}}(e,t);case n.FETCH_ORGS:case n.FETCH_ORGS_NONE:case n.FETCH_ORGS_SUCCESS:case n.FETCH_ORGS_ERROR:return function(e,t){var a=t.payload;switch(t.type){case n.FETCH_ORGS_SUCCESS:return R({},e,{orgState:a});case n.FETCH_ORGS:return R({},e,{orgState:{orgFetchStatus:o.FETCHING}});case n.FETCH_ORGS_ERROR:case n.FETCH_ORGS_NONE:return R({},e,{orgState:{orgFetchStatus:o.ERROR}});default:return e}}(e,t);default:return e}};function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(a,!0).forEach((function(t){Object(d.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},Object(E.makeBaseStoreState)(),{narrativeState:{narrativeList:[],loading:!0},profileView:{profileFetchStatus:i.NONE},orgState:{orgFetchStatus:o.NONE}})}a(729);var _=a(119),w=a(120),I=a(123),F=a(121),N=a(124),P=(a(329),a(132)),A=a(30),D=a.n(A),H=a(54);function x(e,t){return V.apply(this,arguments)}function V(){return(V=Object(H.a)(D.a.mark((function e(t,a){var r,n,s,i,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a+"/services/service_wizard",n={id:0,method:"ServiceWizard.get_service_status",version:"1.1",params:[{module_name:"bff",version:null}]},s=JSON.stringify(n),e.next=5,fetch(r,{method:"POST",mode:"cors",headers:{Authorization:t},body:s});case 5:return i=e.sent,e.next=8,i.json();case 8:return o=e.sent,console.log("getBFFServiceUrl",o),e.abrupt("return",o.result[0].url);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e,t,a){return U.apply(this,arguments)}function U(){return(U=Object(H.a)(D.a.mark((function e(t,a,r){var n,s,i,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(a,r);case 2:return n=e.sent,s=n+"/fetchUserProfile/"+t,e.next=6,fetch(s,{method:"GET"});case 6:if(i=e.sent,console.log("fetchProfileAPI",i),404!==i.status){e.next=12;break}console.warn("404 response:",i),e.next=15;break;case 12:if(500!==i.status){e.next=15;break}return console.error("500 response:",i),e.abrupt("return");case 15:return e.prev=15,e.next=18,i.json();case 18:return o=e.sent,e.abrupt("return",o);case 22:e.prev=22,e.t0=e.catch(15),console.error("profile fetch failed",i);case 25:case"end":return e.stop()}}),e,null,[[15,22]])})))).apply(this,arguments)}function L(e,t,a){return G.apply(this,arguments)}function G(){return(G=Object(H.a)(D.a.mark((function e(t,a,r){var n,s,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={version:"1.1",method:"UserProfile.update_user_profile",params:[{profile:{user:{realname:"Akiyo Marukawa",username:"amarukawa"},profile:{userdata:r}}}]},s=JSON.stringify(n),"https://ci.kbase.us","https://ci.kbase.us/services/user_profile/rpc",e.next=6,fetch("https://ci.kbase.us/services/user_profile/rpc",{method:"POST",mode:"cors",headers:{Authorization:t,"Content-Type":"application/json"},body:s});case 6:return i=e.sent,e.abrupt("return",i.status);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e,t,a){return B.apply(this,arguments)}function B(){return(B=Object(H.a)(D.a.mark((function e(t,a,r){var n,s,i,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(a,r);case 2:return n=e.sent,s=n+"/narrative_list/"+t,e.next=6,fetch(s,{method:"GET",headers:{Authorization:a}});case 6:if(500!==(i=e.sent).status){e.next=10;break}return console.error("Fetch Narratives 500 response:",i),e.abrupt("return");case 10:return e.prev=10,e.next=13,i.json();case 13:return o=e.sent,e.abrupt("return",o);case 17:e.prev=17,e.t0=e.catch(10),console.error("fetch narratives failed",i);case 20:case"end":return e.stop()}}),e,null,[[10,17]])})))).apply(this,arguments)}function J(e,t,a){return K.apply(this,arguments)}function K(){return(K=Object(H.a)(D.a.mark((function e(t,a,r){var n,s,i,o;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(a,r);case 2:return n=e.sent,s=n+"/org_list/"+t,e.next=6,fetch(s,{method:"GET",headers:{Authorization:a}});case 6:if(500!==(i=e.sent).status){e.next=10;break}return console.error("500 response:",i),e.abrupt("return");case 10:return e.prev=10,e.next=13,i.json();case 13:return o=e.sent,e.abrupt("return",o);case 17:e.prev=17,e.t0=e.catch(10),console.error("fetch org failed",i);case 20:case"end":return e.stop()}}),e,null,[[10,17]])})))).apply(this,arguments)}function q(){return(q=Object(H.a)(D.a.mark((function e(t,a,r){var n,s,i,o,l;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={version:"1.1",method:"UserProfile.filter_users",params:[{filter:t}]},s=JSON.stringify(n),i=r+"/services/user_profile/rpc",e.next=5,fetch(i,{method:"POST",mode:"cors",headers:{Authorization:a,"Content-Type":"application/json"},body:s});case 5:if(500!==(o=e.sent).status){e.next=9;break}return console.error("500 response:",o),e.abrupt("return");case 9:return e.prev=9,e.next=12,o.json();case 12:return l=e.sent,e.abrupt("return",l);case 16:e.prev=16,e.t0=e.catch(9),console.error("fetch search users failed",o);case 19:case"end":return e.stop()}}),e,null,[[9,16]])})))).apply(this,arguments)}function W(){return{type:r.FETCH_PROFILE}}function Y(e){return{type:r.FETCH_PROFILE_SUCCESS,payload:e}}function Q(){return{type:r.FETCH_PROFILE_ERROR}}function X(e){return function(){var t=Object(H.a)(D.a.mark((function t(a,r){var n,s,o,l,c;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a(W()),null===(n=r()).auth.userAuthorization){t.next=10;break}return s=n.auth.userAuthorization.token,o=n.app.config.baseUrl,t.next=7,M(e,s,o);case 7:c=t.sent,console.log("getProfile",c),"undefined"!==typeof c?(c.user.username!==n.auth.userAuthorization.username&&a(Object(E.sendTitle)("User Profile for "+c.user.realname)),l={userName:{userID:c.user.username,name:c.user.realname},profileData:c.profile.userdata,gravatarHash:c.profile.synced.gravatarHash,profileFetchStatus:i.SUCCESS},a(Y(l))):a(Q());case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}a(330);var Z=a(69),$=(a(331),a(91)),ee=(a(332),a(49)),te=(a(733),a(180)),ae=(a(736),a(145)),re=(a(166),a(40)),ne=(a(238),a(80)),se=(a(739),a(68)),ie=a(34),oe=(a(239),a(67)),le=(a(742),a(70)),ce=(a(744),a(96)),ue=a(356),pe=a.n(ue);var he=function(e){console.log(e);var t=e.orgList;return c.a.createElement("ul",{style:{textAlign:"left"}},t.map((function(e,t){return c.a.createElement("li",{key:t},c.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.name))})))},fe=(a(333),a(172));function de(e){return c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement(fe.a,{size:"large"}))}function be(e){return c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement("p",null,"Something went wrong... "))}var me=Object(f.connect)((function(e){switch(e.orgState.orgFetchStatus){case o.NONE:case o.FETCHING:case o.ERROR:return{orgFetchStatus:e.orgState.orgFetchStatus};case o.SUCCESS:return{orgList:e.orgState.orgList,orgFetchStatus:e.orgState.orgFetchStatus};default:return{orgFetchStatus:e.orgState.orgFetchStatus}}}))((function(e){switch(e.orgFetchStatus){case"none":case"fetching":return c.a.createElement(de,null);case"success":return c.a.createElement(he,{orgList:e.orgList});case"error":return c.a.createElement(be,null);default:return c.a.createElement("div",null,"hello")}})),Ee=1e3,ve=50,ge=50,Oe=100,Se=[{value:"Genome Annotation",label:"Genome Annotation"},{value:"Genome Assembly",label:"Genome Assembl"},{value:"Microbial Communities",label:"Microbial Communities"},{value:"Comparative Genomics",label:"Comparative Genomi"},{value:"Expression",label:"Expression"},{value:"Metabolic Modeling",label:"Metabolic Modeling"},{value:"Read Processing",label:"Read Processin"},{value:"Sequence Analysis",label:"Sequence Analysis"},{value:"Utilities",label:"Utilities"},{value:"Other",label:"Other"}],ye=[{value:"CEO",label:"CEO"},{value:"CSO",label:"CSO"},{value:"Scientific Director",label:"Scientific Director"},{value:"Principal Investigator",label:"Principal Investigator"},{value:"Co-investigator",label:"Co-investigator"},{value:"Staff Scientist",label:"Staff Scientist"},{value:"Research Associate",label:"Research Associate"},{value:"Postdoctoral Scientist",label:"Postdoctoral Scientist"},{value:"Graduate Student",label:"Graduate Student"},{value:"Undergraduate Student",label:"Undergraduate Student"},{value:"Assistant Professor",label:"Assistant Professor"},{value:"Associate Professor",label:"Associate Professor"},{value:"Professor",label:"Professor"},{value:"Physician",label:"Physician"},{value:"Other",label:"Other"}],Ce=ce.a.Meta,Re=le.a.TextArea,ke=oe.a.Option,Te=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(I.a)(this,Object(F.a)(t).call(this,e))).state={foo:"foo",profileDataKeySet:new Set,researchInterestsModalVisible:!1,researchInterestsValue:[],afflicationModalVisible:!1,jobTitleModalVisible:!1,jobTitleValue:""},a.tooltipVisibility=a.tooltipVisibility.bind(Object(ie.a)(a)),a.gravaterSrc=a.gravaterSrc.bind(Object(ie.a)(a)),a.setName=a.setName.bind(Object(ie.a)(a)),a.affiliations=a.affiliations.bind(Object(ie.a)(a)),a.researchInterests=a.researchInterests.bind(Object(ie.a)(a)),a.setJobTitle=a.setJobTitle.bind(Object(ie.a)(a)),a.handleOnClick=a.handleOnClick.bind(Object(ie.a)(a)),a.showModal=a.showModal.bind(Object(ie.a)(a)),a.closeModal=a.closeModal.bind(Object(ie.a)(a)),a.handleOnBlur=a.handleOnBlur.bind(Object(ie.a)(a)),a.researchStatementChange=a.researchStatementChange.bind(Object(ie.a)(a)),a.jobTitleOnChange=a.jobTitleOnChange.bind(Object(ie.a)(a)),a.foo=a.foo.bind(Object(ie.a)(a)),a.researchInterestSave=a.researchInterestSave.bind(Object(ie.a)(a)),a.researchInterestOnChange=a.researchInterestOnChange.bind(Object(ie.a)(a)),a}return Object(N.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){var e;console.log("profile props",this.props),e=this.props.profileData;var t=new Set;for(var a in e)t.add(a);this.setState({profileDataKeySet:t}),"undefined"!==typeof e.researchInterests&&Array.isArray(e.researchInterests)&&this.setState({researchInterestsValue:e.researchInterests}),this.tooltipVisibility()}},{key:"componentDidUpdate",value:function(e,t,a){console.log("componentdidUpdate",this.state),console.log("componentdidUpdate",t),this.tooltipVisibility()}},{key:"tooltipVisibility",value:function(){return{visibility:"visible"}}},{key:"gravaterSrc",value:function(){return"silhoutte"!==this.props.profileData.avatarOption&&this.props.gravatarHash?(this.props.gravatarHash,"https://www.gravatar.com/avatar/"+this.props.gravatarHash+"?s=300&amp;r=pg&d="+this.props.profileData.gravatarDefault):pe.a}},{key:"setName",value:function(){return c.a.createElement(se.a,{title:"must be less than 100 characters"},c.a.createElement(le.a,{className:"clear-disabled",maxLength:Oe,defaultValue:this.props.userName.name})," ")}},{key:"affiliations",value:function(){return"undefined"!==typeof this.props.profileData.affiliations&&Array.isArray(this.props.profileData.affiliations)?c.a.createElement("ul",{style:{textAlign:"left"}},this.props.profileData.affiliations.map((function(e,t){return c.a.createElement("li",{key:t},e.title," @ ",e.organization,", ",e.started," -"," ",e.ended," ")}))):c.a.createElement("div",null,c.a.createElement(ne.a,{image:ne.a.PRESENTED_IMAGE_SIMPLE}))}},{key:"setJobTitle",value:function(){return"Other"===this.props.profileData.jobTitle&&"undefined"!==typeof this.props.profileData.jobTitle?this.props.profileData.jobTitleOther:"undefined"!==typeof this.props.profileData.jobTitle?this.props.profileData.jobTitle:""}},{key:"researchInterests",value:function(){var e=[];return"undefined"!==typeof this.props.profileData.researchInterests&&Array.isArray(this.props.profileData.researchInterests)?(e=this.props.profileData.researchInterests,c.a.createElement("ul",{style:{textAlign:"left"}},e.map((function(e){return c.a.createElement("li",{key:e},e)})))):c.a.createElement("div",null,"No reasearch interest chosen.")}},{key:"handleOnClick",value:function(e){console.log("on click",e.target),e.target.hasAttribute("readonly")&&e.target.removeAttribute("readonly")}},{key:"showModal",value:function(e){switch(console.log("showModal",e.currentTarget),e.currentTarget.id){case"researchInterests":this.setState({researchInterestsModalVisible:!0});break;case"affiliations":this.setState({afflicationModalVisible:!0});break;case"jobTitle":this.setState({jobTitleModalVisible:!0})}}},{key:"closeModal",value:function(e){switch(console.log("closeModal",e.target,e),e.target.id){case"researchInterests":this.setState({researchInterestsModalVisible:!1});break;case"affiliations":this.setState({afflicationModalVisible:!1});break;case"jobTitle":this.setState({jobTitleModalVisible:!1})}}},{key:"handleOnSubmit",value:function(e){switch(e.preventDefault(),console.log("handleOnSubmit",e.target,e),e.target.id){case"researchInterests":this.setState({researchInterestsModalVisible:!1}),this.state.researchInterestsValue===this.props.profileData.researchInterests?console.log("this need to be updated"):console.log("keep the same thing");break;case"affiliations":this.setState({afflicationModalVisible:!1});break;case"jobTitle":this.setState({jobTitleModalVisible:!1}),this.state.jobTitleValue===this.props.profileData.jobTitle?console.log("this need to be updated"):console.log("keep the same thing")}}},{key:"handleOnBlur",value:function(e){console.log("handleOnBlur",e.target);for(var t=e.target,a=this.props.profileData,r=0;r<t.classList.length;r++){var n=t.classList[r];this.state.profileDataKeySet.has(n)&&a[n]!==t.value&&(a[n]=t.value.trim(),this.props.updateProfile(this.props.userName.userID,a))}}},{key:"researchStatementChange",value:function(e){console.log("researchStatement",e.target);for(var t=e.target,a=this.props.profileData,r=0;r<t.classList.length;r++){var n=t.classList[r];this.state.profileDataKeySet.has(n)&&a[n]!==t.value&&(a[n]=t.value.trim(),this.props.updateProfile(this.props.userName.userID,a))}}},{key:"jobTitleOnChange",value:function(e){this.setState({jobTitleValue:e})}},{key:"researchInterestOnChange",value:function(e){"undefined"!==typeof e&&this.setState({researchInterestsValue:e})}},{key:"researchInterestSave",value:function(e){this.setState({researchInterestsModalVisible:!1});var t=this.props.profileData,a=this.state.researchInterestsValue,r=t.researchInterests;if(a.length!==r.length)t.researchInterests=a,this.props.updateProfile(this.props.userName.userID,t);else for(var n=0;n<a.length;n++)if(a[n]!==r[n]){t.researchInterests=a,this.props.updateProfile(this.props.userName.userID,t);break}}},{key:"foo",value:function(e){return"success"}},{key:"render",value:function(){return c.a.createElement(Z.a,{style:{padding:16}},c.a.createElement(Z.a,{gutter:8},c.a.createElement(ee.a,{span:8},c.a.createElement(ce.a,{style:{margin:"8px 0px",textAlign:"center"}},c.a.createElement(se.a,{overlayStyle:this.tooltipVisibility(),title:"click to edit Avatar Options"},c.a.createElement("img",{style:{maxWidth:"100%",margin:"8px 0px"},alt:"avatar",src:this.gravaterSrc()}))),c.a.createElement(ce.a,{style:{margin:"8px 0px",textAlign:"left"},title:this.setName},c.a.createElement(Ce,{title:"User ID"}),c.a.createElement(se.a,{overlayStyle:this.tooltipVisibility(),trigger:"click",title:"User ID cannot be changed"},c.a.createElement(le.a,{className:"clear-disabled userID",readOnly:!0,placeholder:"User ID",defaultValue:this.props.userName.userID})),c.a.createElement(Ce,{title:"Position"}),c.a.createElement("div",{id:"jobTitle",onClick:this.showModal},c.a.createElement(le.a,{className:"clear-disabled",maxLength:ge,defaultValue:this.setJobTitle()})),c.a.createElement(te.a,{visible:this.state.jobTitleModalVisible,title:"Job Title",okText:"Save",onOk:this.closeModal,onCancel:this.closeModal,closable:!0,footer:[c.a.createElement(re.a,{key:"back",id:"jobTitle",onClick:this.closeModal},"Return"),c.a.createElement(ae.a.Item,null,c.a.createElement(re.a,{key:"submit",id:"jobTitle",type:"primary",onClick:this.handleOnSubmit},"Submit"))]},c.a.createElement(ae.a,{onSubmit:this.handleOnSubmit},c.a.createElement(ae.a.Item,null,c.a.createElement(oe.a,{style:{width:"100%"},onChange:this.jobTitleOnChange},ye.map((function(e){return c.a.createElement(ke,{value:e.value},e.label)})))))),c.a.createElement(Ce,{title:"Department"}),c.a.createElement(se.a,{overlayStyle:this.tooltipVisibility(),trigger:"click",title:"must be more than 2 and less than 50 characters"},c.a.createElement(le.a,{className:"clear-disabled department",readOnly:!0,maxLength:ve,onClick:this.handleOnClick,onBlur:this.handleOnBlur,defaultValue:this.props.profileData.department})),c.a.createElement(Ce,{title:"Organization"}),c.a.createElement(le.a,{className:"clear-disabled",disabled:!0,defaultValue:this.props.profileData.organization}),c.a.createElement(Ce,{title:"Location"}),c.a.createElement(se.a,{overlayStyle:this.tooltipVisibility(),trigger:"click",title:"must be less than 100 characters"},c.a.createElement(le.a,{className:"clear-disabled",disabled:!0,defaultValue:this.props.profileData.city})),c.a.createElement(le.a,{className:"clear-disabled",disabled:!0,defaultValue:this.props.profileData.state}),c.a.createElement(le.a,{className:"clear-disabled",disabled:!0,defaultValue:this.props.profileData.country}),c.a.createElement(Ce,{title:"Primary Funding Source"}),c.a.createElement(le.a,{className:"clear-disabled",disabled:!0,defaultValue:this.props.profileData.fundingSource}))),c.a.createElement(ee.a,{span:16},c.a.createElement(Z.a,{gutter:8},c.a.createElement(ee.a,{span:12},c.a.createElement(ce.a,{className:"card-with-height researchInterests",style:{margin:"8px 0px"},title:"Research Interests"},c.a.createElement("div",{id:"researchInterests",onClick:this.showModal},c.a.createElement(this.researchInterests,null)),c.a.createElement(te.a,{visible:this.state.researchInterestsModalVisible,title:"Research Interests",okText:"Save",onOk:this.closeModal,onCancel:this.closeModal,footer:[c.a.createElement(re.a,{key:"back",id:"researchInterests",onClick:this.closeModal},"Return"),c.a.createElement(re.a,{key:"submit",id:"researchInterests",type:"primary",onClick:this.researchInterestSave},"Submit")]},c.a.createElement($.a.Group,{options:Se,defaultValue:this.props.profileData.researchInterests,onChange:this.researchInterestOnChange})))),c.a.createElement(ee.a,{span:12},c.a.createElement(ce.a,{className:"card-with-height",style:{margin:"8px 0px"},title:"Organizations"},c.a.createElement(me,null)))),c.a.createElement(Z.a,null,c.a.createElement(ce.a,{style:{margin:"8px 0px"},title:"Research or Personal Statement"},c.a.createElement(ae.a.Item,null,c.a.createElement(se.a,{overlayStyle:this.tooltipVisibility(),trigger:"click",title:"must be less than 1000 characters"},c.a.createElement(Re,{autosize:!0,maxLength:Ee,readOnly:!0,className:"clear-disabled researchStatement",onClick:this.handleOnClick,onBlur:this.researchStatementChange,defaultValue:this.props.profileData.researchStatement})))),c.a.createElement(ce.a,{style:{margin:"8px 0px"},title:"Affiliations"},c.a.createElement("div",{id:"affiliations",onClick:this.showModal,onBlur:this.handleOnBlur},c.a.createElement(this.affiliations,null)),c.a.createElement(te.a,{visible:this.state.afflicationModalVisible,title:"Research Interests",okText:"Save",onOk:this.closeModal,onCancel:this.closeModal,footer:[c.a.createElement(re.a,{key:"back",id:"affiliations",onClick:this.closeModal},"Return"),c.a.createElement(re.a,{key:"submit",id:"affiliations",type:"primary",onClick:this.closeModal},"Submit")]},"sweet"))))))}}]),t}(c.a.Component);var je=Object(f.connect)((function(e){switch(null!==e.auth.userAuthorization?e.auth.userAuthorization.token:"",e.profileView.profileFetchStatus){case i.NONE:case i.FETCHING:case i.ERROR:return{profileFetchStatus:e.profileView.profileFetchStatus};case i.SUCCESS:var t=e.profileView;return{userName:t.userName,editEnable:!1,profileData:t.profileData,gravatarHash:t.gravatarHash,profileFetchStatus:t.profileFetchStatus};default:return{profileFetchStatus:i.NONE}}}),(function(e){return{updateProfile:function(t,a){return e(function(e,t){return function(){var a=Object(H.a)(D.a.mark((function a(r,n){var s,i,o;return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r(W()),null===(s=n()).auth.userAuthorization){a.next=11;break}return i=s.auth.userAuthorization.token,s.app.config.baseUrl,"https://ci.kbase.us",a.next=8,L(i,"https://ci.kbase.us",t);case 8:o=a.sent,console.log("update response",o),r(200===o?X(e):Q());case 11:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}(t,a))}}}))((function(e){switch(e.profileFetchStatus){case"none":case"fetching":return c.a.createElement(de,null);case"success":return c.a.createElement(Te,{userName:e.userName,editEnable:e.editEnable,profileData:e.profileData,gravatarHash:e.gravatarHash,profileFetchStatus:e.profileFetchStatus,updateProfile:e.updateProfile});case"error":return c.a.createElement(be,null);default:return c.a.createElement("div",null,"hello")}})),_e=(a(754),a(359)),we=(a(751),a(357));var Ie=function(e){console.log(e);for(var t=[],a=e.loading,r=[{title:"Title",dataIndex:"name",width:350,key:"wsID",render:function(e,t){var a="/narrative/"+t.wsID;return c.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},e)},sorter:function(e,t){var a=e.name.toUpperCase(),r=t.name.toUpperCase();return a<r?-1:a>r?1:0}},{title:"Last Saved",dataIndex:"last_saved",width:190,render:function(e,t){var a=function(e){var t=(Date.now()-+new Date(e))/1e6,a=new Date(e).toString(),r=a.slice(4,7)+" "+a.slice(8,10)+" "+a.slice(11,15),n=r+" "+a.slice(16,24);return t>=2628?[n,r]:t<2628&&t>=86.4?[n,(t/86.4).toFixed(0)+" days ago"]:t<86.4&&t>=3.6?[r,(t/3.6).toFixed(0)+" hours ago"]:t<3.6&&t>=.06?[n,(10*t).toFixed(0)+" min ago"]:[n,"less than a min ago"]}(t.last_saved);return c.a.createElement(we.a,{placement:"right",content:a[0]},a[1])},sorter:function(e,t){var a=e.last_saved,r=t.last_saved;return a<r?1:a>r?-1:0}}],n=0;n<e.narratives.length;n+=1){var s=e.narratives[n];if("r"===s.permission||"n"===s.permission)Object.keys(s.users).length,t.push({key:s.wsID,wsID:s.wsID,name:s.name,last_saved:s.last_saved});else{var i=s.narrative_detail,o="";for(var l in s.users)l!==i.creator&&(o=o+l+", ");t.push({key:s.wsID,wsID:s.wsID,name:s.name,last_saved:s.last_saved})}}return c.a.createElement(_e.a,{style:{width:"85%",margin:"auto"},columns:r,dataSource:t,loading:a})};var Fe=Object(f.connect)((function(e){return console.log("narrativeState",e),{narratives:e.narrativeState.narrativeList,loading:e.narrativeState.loading}}))(Ie),Ne=oe.a.Option,Pe=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(I.a)(this,Object(F.a)(t).call(this,e))).state={data:[],mouseLeave:!1},a.onChangeHandler=a.onChangeHandler.bind(Object(ie.a)(a)),a.onSearchHandler=a.onSearchHandler.bind(Object(ie.a)(a)),a.onMouseLeaveHandler=a.onMouseLeaveHandler.bind(Object(ie.a)(a)),a.onMouseEnterHandler=a.onMouseEnterHandler.bind(Object(ie.a)(a)),a}return Object(N.a)(t,e),Object(w.a)(t,[{key:"onSearchHandler",value:function(e){var t=this;e.length>2&&!0!==this.state.mouseLeave&&function(e,t,a){return q.apply(this,arguments)}(e,this.props.token,this.props.baseURL).then((function(e){"undefined"!==typeof e?t.setState({data:e.result[0]}):t.setState({data:[{username:"error",realname:"Something went wrong. Try again later."}]})}))}},{key:"onMouseLeaveHandler",value:function(){this.setState({mouseLeave:!0})}},{key:"onMouseEnterHandler",value:function(){this.setState({mouseLeave:!1})}},{key:"onChangeHandler",value:function(e){if("error"!==e&&"undefined"!==typeof e){var t="/#user/"+e;window.open(t,"_blank")}}},{key:"render",value:function(){var e=this.state.data;return c.a.createElement(oe.a,{mode:"single",style:{width:250},allowClear:!0,showSearch:!0,placeholder:"enter more than 3 characters",showArrow:!1,onSearch:this.onSearchHandler,onChange:this.onChangeHandler,onMouseLeave:this.onMouseLeaveHandler,onMouseEnter:this.onMouseEnterHandler,optionFilterProp:"children",filterOption:function(e,t){return!0}},e.map((function(e){return c.a.createElement(Ne,{key:e.username},e.realname," (",e.username,")")})))}}]),t}(c.a.Component);var Ae=Object(f.connect)((function(e){return e}))((function(e){return c.a.createElement(Pe,{token:e.auth.userAuthorization.token,baseURL:e.app.config.baseUrl})})),De=P.a.TabPane,He=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(I.a)(this,Object(F.a)(t).call(this,e))).searchOnATab=c.a.createElement("div",{className:"search-on-a-tab"},"Search other users ",c.a.createElement(Ae,null)),a.state={userName:{name:"",userID:""},editEnable:!1,narrativesLoaded:!1,organizations:[],organizationsLoaded:!1,gravatarHash:""},a}return Object(N.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){var e;this.props.username?(e=this.props.username,this.props.setTitle("User Profile for "+e)):(e=this.props.authUsername,this.props.setTitle("Your User Profile"),this.setState({editEnable:!0})),this.props.getProfile(e),this.props.getOrgs(e),"undefined"!==typeof this.props.username&&"undefined"!==typeof this.props.authUsername?this.props.username===this.props.authUsername||null===this.props.username?this.props.loadNarratives("mine",this.props.authUsername):this.props.loadNarratives("they",this.props.username):console.error("How did this even happened? Check error message from Kbase-UI.")}},{key:"componentDidUpdate",value:function(e,t){this.state}},{key:"render",value:function(){return c.a.createElement("div",{className:"profile-tabs"},c.a.createElement(P.a,{type:"line",defaultActiveKey:"5"},c.a.createElement(De,{tab:"Narratives",key:"3"},c.a.createElement(Fe,null)),c.a.createElement(De,{tab:"Profile with class",key:"5"},c.a.createElement(je,null)),c.a.createElement(De,{disabled:!0,tab:this.searchOnATab,key:"8"})))}}]),t}(c.a.Component);var xe=Object(f.connect)((function(e,t){var a=e.auth.userAuthorization,r=e.app,n=r.config.baseUrl,s=r.runtime.navigation.params;if(!a)throw new Error("This plugin only operates with authentication; no KBase token in store");var i=s;return{token:a.token,authUsername:a.username,username:i.username||null,baseURL:n}}),(function(e,t){return{loadNarratives:function(t,a){return e(function(e,t){return function(){var a=Object(H.a)(D.a.mark((function a(r,n){var i,o,l,c,u,p,h,f;return D.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(null===(i=n()).auth.userAuthorization){a.next=20;break}o=i.auth.userAuthorization.token,i.app.config.baseUrl,a.t0=e,a.next="they"===a.t0?7:"mine"===a.t0?13:"shared"===a.t0?13:"public"===a.t0?13:18;break;case 7:return l=z("public",o,"https://ci.kbase.us/"),c=z("shared",o,"https://ci.kbase.us/"),u=[],p=[],Promise.all([l,c]).then((function(e){"undefined"!==typeof e[0]&&"undefined"!==typeof e[1]?u=e[0].concat(e[1]):"undefined"===typeof e[0]&&"undefined"!==typeof e[1]?(console.error("error occuerred during fetching narratives."),u=e[1]):"undefined"!==typeof e[0]&&"undefined"===typeof e[1]?u=e[0]:(console.error("error occuerred during fetching narratives."),p=[{wsID:"",permission:"",name:"Something went wrong. Please check console for error messages.",last_saved:0,users:{},narrative_detail:{creator:""}}]);for(var a=0;a<u.length;a+=1)u[a].narrative_detail.creator===t&&p.push(u[a]);r({type:s.FETCH_NARRATIVE_SUCCESS,payload:{narrativeList:p,loading:!1}})})),a.abrupt("break",18);case 13:return a.next=15,z(e,o,"https://ci.kbase.us/");case 15:return"undefined"!==typeof(h=a.sent)?r({type:s.FETCH_NARRATIVE_SUCCESS,payload:{narrativeList:h,loading:!1}}):(f=[{wsID:"",permission:"",name:"Something went wrong. Please check console for error messages.",last_saved:0,users:{},narrative_detail:{creator:""}}],r({type:s.FETCH_NARRATIVE_ERROR,payload:{narrativeList:f,loading:!1}})),a.abrupt("break",18);case 18:a.next=21;break;case 20:console.error("I don't think this even should happen, but if it did, I must ask 'what kind of horrible bugs did you you create?'");case 21:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()}(t,a))},setTitle:function(t){return e(Object(E.sendTitle)(t))},getProfile:function(t){return e(X(t))},getOrgs:function(t){return e(function(e){return function(){var t=Object(H.a)(D.a.mark((function t(a,r){var s,i,l,c;return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a({type:n.FETCH_ORGS}),s=r(),i=[],null===s.auth.userAuthorization){t.next=9;break}return l=s.auth.userAuthorization.token,t.next=7,J(e,l,s.app.config.baseUrl);case 7:"undefined"!==typeof(c=t.sent)?(c.forEach((function(e){i.push({name:e.name,url:s.app.config.baseUrl+"/#org/"+e.id})})),a((u={orgList:i,orgFetchStatus:o.SUCCESS},{type:n.FETCH_ORGS_SUCCESS,payload:u}))):a({type:n.FETCH_ORGS_ERROR});case 9:case"end":return t.stop()}var u}),t)})));return function(e,a){return t.apply(this,arguments)}}()}(t))}}}))(He),Ve=h.a.Content,Me=Object(b.d)(k,j(),Object(b.c)(Object(b.a)(m.a))),Ue=function(){return c.a.createElement(f.Provider,{store:Me},c.a.createElement(E.AppBase,null,c.a.createElement(E.AuthGate,{required:!0},c.a.createElement("div",{className:"App"},c.a.createElement(h.a,{style:{minHeight:"100vh"}},c.a.createElement(Ve,{style:{backgroundColor:"white"}},c.a.createElement(xe,null)))))))};p.a.render(c.a.createElement(Ue,null),document.getElementById("root"))}},[[363,1,2]]]);
//# sourceMappingURL=main.1239bc09.chunk.js.map